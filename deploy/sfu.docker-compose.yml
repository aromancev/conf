version: '3.9'
services:
  sfu:
    build:
      context: ../service-go
      dockerfile: ./cmd/sfu/Dockerfile
    network_mode: "host"
    environment:
      - LISTEN_WEB_ADDRESS=:8080
      - LOG_FORMAT=console
      - ICE_PORT_MIN=50000
      - ICE_PORT_MAX=60000

  turn:
    build:
      context: ../service-go
      dockerfile: ./cmd/turn/Dockerfile
    network_mode: "host"
    environment:
      - LISTEN_WEB_ADDRESS=:3478
      - LOG_FORMAT=console
      - REALM=confa.io
      - USERNAME=confa
      - CREDENTIAL=confa
      - PUBLIC_IP=31.184.253.195
      - PUBLIC_KEY=$PUBLIC_KEY
