import {
  toSvg,
  drawIcon,
  JdenticonCompatibleCanvasRenderingContext2D,
} from "jdenticon"

const first: string[] = [
  "Affectionate",
  "Amiable",
  "Bright",
  "Charming",
  "Creative",
  "Determined",
  "Diligent",
  "Diplomatic",
  "Dynamic",
  "Energetic",
  "Friendly",
  "Funny",
  "Generous",
  "Helpful",
  "Kind",
  "Likable",
  "Patient",
  "Polite",
  "Sincere",
  "Brave",
  "Capable",
  "Considerate",
  "Courageous",
  "Faithful",
  "Fearless",
  "Humorous",
  "Marvelous",
  "Nice",
  "Optimistic",
  "Passionate",
  "Proficient",
  "Thoughtful",
  "Amazing",
  "Awesome",
  "Blithesome",
  "Excellent",
  "Fabulous",
  "Favorable",
  "Gorgeous",
  "Incredible",
  "Unique",
  "Outstanding",
  "Philosophical",
  "Remarkable",
  "Spectacular",
  "Stellar",
  "Super",
  "Upbeat",
  "Stunning",
  "Brilliant",
  "Breathtaking",
  "Dazzling",
  "Elegant",
  "Enchanting",
  "Glowing",
  "Lovely",
  "Magnificent",
  "Vivid",
  "Vibrant",
  "Ambitious",
  "Competitive",
  "Confident",
  "Efficient",
  "Flexible",
  "Focused",
  "Honest",
  "Independent",
  "Insightful",
  "Organized",
  "Relaxed",
  "Independent",
]
const second: string[] = [
  "Alligator",
  "Armadillo",
  "Albatross",
  "Alabai",
  "Ainu",
  "Alpaca",
  "Antelope",
  "Badger",
  "Beagle",
  "Butterfly",
  "Bandicoot",
  "Bear",
  "Buffalo",
  "Bumblebee",
  "Beaver",
  "Beetle",
  "Bison",
  "Camel",
  "Cat",
  "Chameleon",
  "Cheetah",
  "Cougar",
  "Crab",
  "Capybara",
  "Dolphin",
  "Deer",
  "Dragon",
  "Dodo",
  "Duck",
  "Eagle",
  "Elephant",
  "Elk",
  "Falcon",
  "Fox",
  "Fish",
  "Flamingo",
  "Frog",
  "Giraffe",
  "Goose",
  "Gopher",
  "Hamster",
  "Heron",
  "Horse",
  "Horgi",
  "Hummingbird",
  "Impala",
  "Jellyfish",
  "Jaguar",
  "Koala",
  "Kangaroo",
  "Kiwi",
  "Lemur",
  "Lobster",
  "Lynx",
  "Leopard",
  "Ladybug",
  "Lion",
  "Moose",
  "Mule",
  "Magpie",
  "Mouse",
  "Mongoose",
  "Octopus",
  "Opossum",
  "Otter",
  "Owl",
  "Penguin",
  "Panther",
  "Puma",
  "Parrot",
  "Piranha",
  "Rabbit",
  "Robin",
  "Raccoon",
  "Squirrel",
  "Starfish",
  "Seal",
  "Sparrow",
  "Scorpion",
  "Shark",
  "Sloth",
  "Swan",
  "Tiger",
  "Toucan",
  "Walrus",
  "Weasel",
  "Wolf",
  "Wolverine",
  "Yak",
  "Zebra",
]

const identiconConfig = {
  lightness: {
    grayscale: [0.3, 0.3],
  },
  saturation: {
    grayscale: 0.5,
  },
  backColor: "#fff",
}

function uuidToBytes(uuid: string): number[] {
  return (uuid.replace(/-/g, "").match(/.{2}/g) || []).map(b => parseInt(b, 16))
}

export function genName(uuid: string): string {
  const bytes = uuidToBytes(uuid)
  const iFirst = bytes[bytes.length - 1] % first.length
  const iSecond = bytes[bytes.length - 2] % second.length
  return first[iFirst] + " " + second[iSecond]
}

export function genAvatar(id: string, size: number): string {
  return toSvg(id, size, identiconConfig)
}

export function drawAvatar(
  ctx: JdenticonCompatibleCanvasRenderingContext2D,
  id: string,
  size: number,
): void {
  drawIcon(ctx, id, size, identiconConfig)
}
